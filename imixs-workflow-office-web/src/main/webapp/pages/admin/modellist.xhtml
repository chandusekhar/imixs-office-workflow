<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template.xhtml">

	<ui:define name="content">
		<f:view>
			<f:loadBundle basename="bundle.config" var="messages" />

			<h:form id="modellist_form_id">
				<div class="sywapp-form">

					<h2>
						<h:outputText value="#{messages.sub_title_model}" />
					</h2>
					<div class="sywapp-form-body">
						<rich:panel>
							<f:facet name="header">#{messages.model_list}</f:facet>


							<rich:dataTable id="model_datatable_id" columns="4"
								value="#{modelManagerMB.models}" var="entity"
								columnClasses="list-column-center,list-column-center,list-column-right"
								headerClass="list-header" rowClasses="list-row"
								styleClass="list-background">


								<rich:column>
									<f:facet name="header">
										<h:outputText value="Version" />
									</f:facet>
									<h:outputText value="#{entity['$modelversion']}" />

								</rich:column>


								<rich:column>
									<f:facet name="header">
										<h:outputText value="last update" />
									</f:facet>
									<h:outputText value="#{entity['$created']}">
										<f:convertDateTime timeZone="#{global.timeZone}" type="both"
											pattern="#{global.dateTimePattern}" />
									</h:outputText>


								</rich:column>



								<rich:column
									rendered="#{IsUserInRole['org.imixs.ACCESSLEVEL.MANAGERACCESS']}">
									<f:facet name="header">
										<h:outputText value="delete" />
									</f:facet>
									<a4j:commandLink
										actionListener="#{modelManagerMB.doSelectModel}"
										id="submit_action">
										<h:outputText value="delete" />
									</a4j:commandLink>
									<rich:componentControl for="submit_panel"
										attachTo="submit_action" operation="show" event="onclick" />

								</rich:column>


							</rich:dataTable>


							<!--  Error Messages -->
							<c:if test="#{! empty facesContext.maximumSeverity}">
								<p>
									<h:messages styleClass="messages" id="errorMessages"
										layout="table" />
								</p>
							</c:if>

						</rich:panel>
						<rich:panel>
							<f:facet name="header">#{messages.model_add}</f:facet>
							<rich:fileUpload acceptedTypes="xml"  maxFilesQuantity="5"
								listHeight="60"
								fileUploadListener="#{modelManagerMB.listener}" id="upload"
								immediateUpload="true" allowFlash="false">

 								<a4j:support event="onuploadcomplete" reRender="model_datatable_id" />
							</rich:fileUpload>


						</rich:panel>





						<rich:modalPanel id="submit_panel" widtmaxFilesQuantity="10"
							h="320" height="130">
							<f:facet name="header">
								<h:panelGroup>
									<h:outputText value="Delete"></h:outputText>
								</h:panelGroup>
							</f:facet>
							<f:facet name="controls">
								<h:panelGroup>
									<h:graphicImage value="/layout/icons/close.png"
										style="cursor:pointer" id="hidelink" />
									<rich:componentControl for="submit_panel" attachTo="hidelink"
										operation="hide" event="onclick" />
								</h:panelGroup>
							</f:facet>
							<h:outputText
								value="Do you realy whant to delete selected model now? "></h:outputText>
							<br />
							<br />
							<h:outputText value=""></h:outputText>
							<br />
							<br />
							<a href="javascript:void();"
								onclick="#{rich:component('submit_panel')}.hide()"> <h:outputText
									value="Cancel" /> </a>

							<rich:spacer width="24px" />
							<h:commandLink actionListener="#{modelManagerMB.doDeleteModel}"
								action="modellist" value="Continue" />
						</rich:modalPanel>
					</div>
				</div>

			</h:form>
		</f:view>
	</ui:define>
</ui:composition>
