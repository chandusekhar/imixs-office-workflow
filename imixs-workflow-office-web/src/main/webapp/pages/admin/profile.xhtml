<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template.xhtml">

	<ui:define name="content">
		<f:view>
			<f:loadBundle basename="bundle.admin" var="messages" />

			<h:form id="profile_form_id">
				<h2><h:outputText value="#{messages.title_profile}: #{profileMB.workitem.item['txtWorkflowStatus']}" /></h2>

				<!-- ########## Error ########## -->
				<ui:include src="/pages/error_message.xhtml" />

				<rich:tabPanel switchType="client">

					<!-- **** Settings ***** -->
					<rich:tab label="#{messages.sub_title_settings}">

						<!-- **** Workflow ***** -->
						<rich:panel>
							
							<f:facet name="header">							
								<h:outputLabel value="#{messages.userid}: #{profileMB.workitem.item['txtName']}"/>
							</f:facet>
							
							
				
							<dl>
								<dt><h:outputLabel value="#{messages.comments}">
								</h:outputLabel></dt>
								<dd><h:inputTextarea required="false"
									value="#{profileMB.workitem.item['txtComments']}" id="description_id"
									style="height: 7em; width: 95%">
								</h:inputTextarea></dd>
							</dl>

							<rich:panel >
								<f:facet name="header">			
								<h:outputText value="#{messages.history}" />
								</f:facet>
								<div style="margin-left:10px;">
								<h:outputText value="#{global.created}: " />
								<h:outputText value="#{profileMB.workitem.item['$created']}">
									<f:convertDateTime type="both" dateStyle="medium" />
								</h:outputText>
								<h:outputText
									value=" #{global.by} #{nameLookupMB.userName[profileMB.workitem.item['namCreator']]}" />
								<br />
								<h:outputText value="#{global.modified}: " />
								<h:outputText value="#{profileMB.workitem.item['$modified']}">
									<f:convertDateTime type="both" dateStyle="medium" />
								</h:outputText>
								<h:outputText
									value=" #{global.by} #{nameLookupMB.userName[profileMB.workitem.item['namCurrentEditor']]}" />
										
								<hr />
								<ui:repeat
									value="#{profileMB.workitem.itemListArray['txtworkflowhistorylog']}"
									var="log">
									
									<h:outputText value="#{log}" />
									<br />
								</ui:repeat>
								</div>
								
							</rich:panel>


						</rich:panel>
					</rich:tab>


					<!-- **** General info ***** -->
					<rich:tab label="#{messages.sub_title_general}" rendered="false">
						<rich:panel>
							<f:facet name="header">							
								<h:outputLabel value="#{messages.sub_title_account}: #{profileMB.workitem.item['txtName']}"
								  />
							</f:facet>
							<dl>
								<dt><h:outputLabel for="firstname_id"
									value="#{messages.firstname}">
									<h:message style="color: red" for="firstname_id"
										showSummary="true" showDetail="false" />
								</h:outputLabel></dt>
								<dd><h:inputText style="width: 20em;" required="true"
									value="#{profileMB.workitem.item['txtFirstName']}" id="firstname_id">
								</h:inputText></dd>


								<dt><h:outputLabel for="lastname_id"
									value="#{messages.lastname}">
									<h:message style="color: red" for="lastname_id"
										showSummary="true" showDetail="false" />
								</h:outputLabel></dt>
								<dd><h:inputText style="width: 20em;" required="true"
									value="#{profileMB.workitem.item['txtLastName']}" id="lastname_id">
								</h:inputText></dd>



								<dt><h:outputLabel for="displayname_id"
									value="#{messages.displayname}">
								</h:outputLabel></dt>
								<dd><h:inputText style="width: 20em;" required="true"
									value="#{profileMB.workitem.item['txtUserName']}" id="displayname_id">
								</h:inputText> <rich:spacer width="8" /> <h:outputText
									value="#{messages.displayname_help}" /> <br />


								<h:message for="displayname_id" style="color: red"
									showSummary="true" showDetail="true">

								</h:message></dd>


								<dt><h:outputLabel for="email_id" value="#{messages.email}">
									<h:message style="color: red" for="email_id" showSummary="true"
										showDetail="false" />
								</h:outputLabel></dt>
								<dd><h:inputText style="width: 20em;" required="true"
									value="#{profileMB.workitem.item['txtEmail']}" id="email_id">
								</h:inputText></dd>


								<dt><h:outputLabel for="phone1_id"
									value="#{messages.phone1}">
									<h:message style="color: red" for="phone1_id"
										showSummary="true" showDetail="false" />
								</h:outputLabel></dt>
								<dd><h:inputText style="width: 20em;" required="false"
									value="#{profileMB.workitem.item['txtPhone1']}" id="phone1_id">
								</h:inputText></dd>


								<dt><h:outputLabel for="phone2_id"
									value="#{messages.phone2}">
									<h:message style="color: red" for="phone2_id"
										showSummary="true" showDetail="false" />
								</h:outputLabel></dt>
								<dd><h:inputText style="width: 20em;" required="false"
									value="#{profileMB.workitem.item['txtPhone2']}" id="phone2_id">
								</h:inputText></dd>




								<dt><h:outputLabel for="company_id"
									value="#{messages.company}">
									<h:message style="color: red" for="company_id"
										showSummary="true" showDetail="false" />
								</h:outputLabel></dt>
								<dd><h:inputText style="width: 20em;" required="false"
									value="#{profileMB.workitem.item['txtCompany']}" id="company_id">
								</h:inputText></dd>


								<dt><h:outputLabel for="address_id"
									value="#{messages.address}">
									<h:message style="color: red" for="address_id"
										showSummary="true" showDetail="false" />
								</h:outputLabel></dt>
								<dd><h:inputText style="width: 20em;" required="false"
									value="#{profileMB.workitem.item['txtaddress']}" id="address_id">
								</h:inputText></dd>



								<dt><h:outputLabel for="zip_id"
									value="#{messages.zip}/#{messages.city}">
									<h:message style="color: red" for="zip_id" showSummary="true"
										showDetail="false" />
								</h:outputLabel></dt>
								<dd><h:inputText style="width:4em;" required="false"
									value="#{profileMB.workitem.item['txtzip']}" id="zip_id">
								</h:inputText> <rich:spacer width="8" /> <h:inputText style="width:15em;"
									required="false" value="#{profileMB.workitem.item['txtcity']}">
								</h:inputText></dd>



								<dt><h:outputLabel for="country_id"
									value="#{messages.country}">
									<h:message style="color: red" for="country_id"
										showSummary="true" showDetail="false" />
								</h:outputLabel></dt>
								<dd><h:inputText style="width: 20em;" required="false"
									value="#{profileMB.workitem.item['txtcountry']}" id="country_id">
								</h:inputText></dd>



								<dt><h:outputLabel for="state_id" value="#{messages.state}">
									<h:message style="color: red" for="state_id" showSummary="true"
										showDetail="false" />
								</h:outputLabel></dt>
								<dd><h:inputText style="width: 20em;" required="false"
									value="#{profileMB.workitem.item['txtstate']}" id="state_id">
								</h:inputText></dd>


							</dl>
						</rich:panel>
					</rich:tab>

				</rich:tabPanel>

				<br />
				<ui:repeat value="#{profileMB.activities}" var="activity">
					<h:commandButton action="admin_profilelist"
						actionListener="#{profileMB.doProcess}"
						value="#{activity.item['txtname']}">
						<f:param name="id" value="#{activity.item['numactivityid']}" />
					</h:commandButton>
				</ui:repeat>
				
				
				
					
				
				<!-- Delete Profile -->					
				<a4j:commandButton value="#{global.delete}" id="delete_button">
				</a4j:commandButton>
				<rich:componentControl for="submit_panel" attachTo="delete_button"
				operation="show" event="onclick" />
						
					
				
				
				
				
				
				<!--  Confirm Delete -->
				
				<rich:modalPanel id="submit_panel" width="390" height="150">
					<f:facet name="header">
						<h:panelGroup>
							<h:outputText value="#{global.confirm}"></h:outputText>
						</h:panelGroup>
					</f:facet>
					<f:facet name="controls">
						<h:panelGroup>
							<h:graphicImage value="/layout/img/close.png"
								style="cursor:pointer" id="hidelink" />
							<rich:componentControl for="submit_panel" attachTo="hidelink"
								operation="hide" event="onclick" />
						</h:panelGroup>
					</f:facet>
					
					<h:outputText value="Profile: #{profileMB.workitem.item['txtName']}"></h:outputText>
					<br />
					<h:outputText value="#{global.delete_help1}"></h:outputText>
					<br />
					<br />
					<a href="#" onclick="#{rich:component('submit_panel')}.hide()">
					<h:outputText value="#{global.cancel}"/></a>
					
					<rich:spacer width="24px"/>
					<h:commandLink value="#{global.continue}"
						action="admin_profilelist"
						actionListener="#{profileMB.doDeleteProfile}" />
				</rich:modalPanel>
				
				
				
				<h:commandButton value="#{global.close}"  immediate="true" action="admin_profilelist" />
				
			</h:form>
		</f:view>
	</ui:define>



</ui:composition>

