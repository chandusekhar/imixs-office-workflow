<f:subview xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" id="sub_timesheet_form">


	<rich:dataTable id="child_datatable_ID" columns="8" rows="5"
		value="#{workitemMB.childs}" var="child"
		styleClass="sywapp-subform-table">

		<rich:column>
			<f:facet name="header">
				<h:outputText value="#{form_messages.sub_timesheet_date}" />
			</f:facet>
			<h:outputText value="#{child.item['_date']}">
				<f:convertDateTime timeZone="#{global.timeZone}"
					pattern="#{global.datePattern}" />
			</h:outputText>
		</rich:column>

		<rich:column>
			<f:facet name="header">
				<h:outputText value="#{form_messages.sub_timesheet_duration}" />
			</f:facet>
			<h:outputText value="#{child.item['_duration']}" />
		</rich:column>

		<rich:column sortBy="#{child.item['_subject']}" sortable="true"
			sortExpression="#{child.item['_subject']}">
			<f:facet name="header">
				<h:outputText value="#{form_messages.sub_timesheet_subject}" />
			</f:facet>
			<h:outputText value="#{child.item['_subject']}" />
		</rich:column>


		<rich:column sortBy="#{child.item['txtworkflowstatus']}"
			sortable="true" sortExpression="#{child.item['txtworkflowstatus']}">
			<f:facet name="header">
				<h:outputText value="Status" />
			</f:facet>
			<h:outputText value="#{child.item['txtworkflowstatus']}" />
		</rich:column>



		<rich:column>
			<f:facet name="header">
                    #{global.action}
                </f:facet>


			<rich:toggleControl for="suggest_process_id"
				switchToState="time_editor_open">

				<a4j:commandButton image="/layout/icons/Edit_16.png"
					actionListener="#{timeSheetMB.doEdit}"
					reRender="time_editor_panel_id" value="#{global.edit}"
					id="edit_button_id" />
				<rich:toolTip for="edit_button_id" value="#{global.edit}" />


			</rich:toggleControl>

		</rich:column>


	</rich:dataTable>
	<rich:datascroller for="child_datatable_ID" />


	<!-- Editor  -->
	<rich:togglePanel switchType="ajax" id="suggest_process_id"
		validatorMessage="Error"
		stateOrder="time_editor_closed,time_editor_open">
		<f:facet name="time_editor_closed">
			<a4j:outputPanel>
				<rich:toggleControl for="suggest_process_id"
					reRender="time_editor_panel_id">
					<a4j:commandButton actionListener="#{timeSheetMB.doCreate}"
						reRender="time_editor_panel_id" value="#{global.add}">
						<f:param name="id"
							value="#{workitemMB.workitem.item['$modelversion']}|6100" />
					</a4j:commandButton>

				</rich:toggleControl>
			</a4j:outputPanel>
		</f:facet>


		<!-- Editor Panel -->
		<f:facet name="time_editor_open">

			<a4j:outputPanel id="time_editor_panel_id" layout="block"
				styleClass="sywapp-subform-body">

				<h:panelGrid columns="6" cellspacing="5 0">
					<h:outputText value="#{form_messages.sub_timesheet_date}: " />
					<rich:calendar value="#{workitemMB.child.item['_date']}" />
					<h:outputText value="#{form_messages.sub_timesheet_duration}: " />

					<h:inputText id="ln" value="#{workitemMB.child.item['_duration']}"
						required="true" style="width:30px;" converter="javax.faces.Integer">
						<f:validateLongRange minimum="1" />
						
					</h:inputText>


					<h:outputText value="#{form_messages.sub_timesheet_subject}: " />
					<h:inputText value="#{workitemMB.child.item['_subject']}"
						style="width:380px;" />
				</h:panelGrid>
				<rich:message style="color:red;" for="ln" />
				<br />

				<!-- *** Workflow Actions **** -->
				<ui:repeat value="#{workitemMB.childActivities}" var="activitychild">

					<rich:toggleControl for="suggest_process_id"
						switchToState="time_editor_closed">
						<a4j:commandButton actionListener="#{workitemMB.doProcessChild}"
							reRender="child_datatable_ID"
							value="#{activitychild.item['txtname']}">
							<f:param name="id" value="#{activitychild.item['numactivityid']}" />
						</a4j:commandButton>
					</rich:toggleControl>
				</ui:repeat>


				<rich:toggleControl for="suggest_process_id" immediate="true"
					switchToState="time_editor_closed">
					<a4j:commandButton value="#{global.close}" immediate="true">

					</a4j:commandButton>

				</rich:toggleControl>

			</a4j:outputPanel>
		</f:facet>
	</rich:togglePanel>












</f:subview>

