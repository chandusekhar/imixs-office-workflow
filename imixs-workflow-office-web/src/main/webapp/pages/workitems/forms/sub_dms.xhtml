<f:subview xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" id="sub_dms_from">



	<a4j:outputPanel 
		id="attachment_info_id" layout="block" style="width: 655px;">

		<a4j:outputPanel id="attachmentlist_id">
				
		<rich:dataList var="attachment"
			value="#{dmsMB.fileList}" rowClasses="sywapp-viewentry ">



			<!-- *** Image *** -->
			<a4j:outputPanel layout="block"
				style="float:left;height:34px;margin-right:2px;margin-left:2px;margin-bottom:0px;">
				<h:graphicImage url="/layout/icons/icon048.png"
					style="border:0px;vertical-align: text-top;margin-right:0.5em"></h:graphicImage>

			</a4j:outputPanel>

			<!-- *** Standard Info *** -->
			<a4j:outputPanel layout="block"
				style="border-bottom: 1px solid silver;margin-bottom:10px;">

				<!--  File Link  -->
				<a4j:outputPanel rendered="#{empty attachment.item['url']}">

					<h:outputText escape="false" value="&lt;a target='_blank'" />
					<h:outputText escape="false"
						value=" href='#{facesContext.externalContext.requestContextPath}/RestService/workflow/workitem/#{attachment.item['$uniqueIDRef']}/file/#{attachment.item['txtName']}" />
					<h:outputText escape="false"
						value="'&gt;#{attachment.item['txtName']}&lt;/a&gt;" />


					<rich:toolTip rendered="#{! empty attachment.item['txtcomment']}"
						style="max-width:400px;" layout="block">
						<span>#{attachment.item['txtcomment']}</span>
					</rich:toolTip>

				</a4j:outputPanel>
				
				<!--  URL Link  -->
				<a4j:outputPanel rendered="#{!empty attachment.item['url']}">

					<h:outputText escape="false" value="&lt;a target='_blank'" />
					<h:outputText escape="false"
						value=" href='#{attachment.item['url']}" />
					<h:outputText escape="false"
						value="'&gt;#{attachment.item['txtName']}&lt;/a&gt;" />


					<rich:toolTip rendered="#{! empty attachment.item['txtcomment']}"
						style="max-width:400px;" layout="block">
						<span>#{attachment.item['txtcomment']}</span>
					</rich:toolTip>

				</a4j:outputPanel>
				


				<br />


				<h:outputText value="#{attachment.item['$created']}">
					<f:convertDateTime timeZone="#{global.timeZone}"
						pattern="#{global.dateTimePattern}" />
				</h:outputText>

				<h:outputText style="font-weight: bold;"
					value="#{workitem.item['txtworkflowgroup']}: " />
				<h:outputText value="#{attachment.item['namCreator']}" />

				<br />

				<!-- Comment Box -->
				<rich:togglePanel switchType="client" id="dms_comment_id"
					stateOrder="dms_comment_closed,dms_comment_open">
					<f:facet name="dms_comment_closed">
						<a4j:outputPanel>
							<!-- closed -->
						</a4j:outputPanel>
					</f:facet>

					<f:facet name="dms_comment_open">
						<!-- open -->
						<a4j:outputPanel layout="block" style="margin-left: 26px;">
							<h:inputTextarea value="#{attachment.item['txtComment']}"
								style="width: 100%; height: 50px" />

						</a4j:outputPanel>
					</f:facet>
				</rich:togglePanel>



				<a4j:outputPanel layout="block" style="margin-left: 26px;">
					<rich:toggleControl for="dms_comment_id">
						<h:outputText style="margin-right:10px;"
							value="[#{global.comment}]" />
					</rich:toggleControl>



					<a4j:commandLink reRender="attachmentlist_id,upload"
						title="#{global.delete}" actionListener="#{dmsMB.doDeleteFile}"
						style="text-decoration:none;">
						<h:outputText value="[#{global.delete}]" />
						<f:param name="filename" value="#{attachment.item['txtName']}" />
					</a4j:commandLink>

				</a4j:outputPanel>

			</a4j:outputPanel>

			<!-- clear floating problem from sidebar in ff and chrome.  -->
			<div style="clear: left;" />






		</rich:dataList>
		</a4j:outputPanel>



	</a4j:outputPanel>



	<div style="width: 380px; xmargin-left: 20px;">
		<rich:fileUpload listWidth="375px;"
			fileUploadListener="#{dmsMB.listener}" listHeight="100px"
			maxFilesQuantity="#{dmsMB.uploadsAvailable}" id="upload"
			immediateUpload="#{dmsMB.autoUpload}" allowFlash="false">
			<a4j:support event="onclear">
				<a4j:actionparam name="fname" noEscape="true"
					value="(event.memo.entry)?event.memo.entry.fileName:'' "
					assignTo="#{dmsMB.fileName}"
					actionListener="#{dmsMB.clearUploadData}" />
			</a4j:support>

		</rich:fileUpload>
	</div>


	<div style="clear: left; margin-top: 10px;">



		<dl class="columns-1">
			<dt>
				<h:outputLabel value="#{global.link}" />
			</dt>
			<dd>
				<h:inputText value="#{dmsMB.link}" style="width:180px;" id="link_input"/>
				<a4j:commandButton value="#{global.add}" actionListener="#{dmsMB.doAddLink}"
					reRender="attachment_info_id,link_input">
				
				</a4j:commandButton>
			</dd>
		</dl>
	</div>






</f:subview>