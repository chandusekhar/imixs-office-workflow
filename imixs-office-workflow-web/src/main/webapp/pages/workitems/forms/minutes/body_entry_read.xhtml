<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<!-- Read Block -->
	<h:panelGroup layout="block" styleClass="imixs-viewentry"
		rendered="#{(empty minuteController.workitem) or (minuteController.workitem.item['$uniqueid'] ne workitem.item['$uniqueid'])}">

		<!-- *** Sequence Number -->
		<div class="minute-number">
			<span>#{workitem.item['numsequencenumber']}.</span>
		</div>


		<div class="minute-info">
			<h:panelGroup styleClass="minute-summary">

			

				<!-- Edit Mode -->
				<h:panelGroup layout="block" rendered="#{editmode}">
					<h:commandLink
						actionListener="#{minuteController.load(workitem.item['$uniqueid'])}">
						<h1>
							<!-- summary empty ? -->
							<h:panelGroup
								rendered="#{empty workitem.item['txtWorkflowSummary']}">
								<h:outputText value="#{workitem.item['$modified']}"
									style="font-weight: bold;">
									<f:convertDateTime timeZone="#{message.timeZone}"
										pattern="#{message.dateTimePattern}" />
								</h:outputText>
								<h:outputText value=" #{workitem.item['_subject']}"
									style="font-weight: bold;" />
							</h:panelGroup>
							<h:outputText style="font-weight: bold;"
								value="#{workitem.item['txtWorkflowSummary']}" />
						</h1>

						<f:ajax render=":#{minutesBody.clientId}"
							onevent="layoutBodySection" />

					</h:commandLink>
				</h:panelGroup>

				<!-- Read only Mode -->
				<h:panelGroup rendered="#{!editmode}">
					<!-- summary empty ? -->
					<h1>
						<h:panelGroup
							rendered="#{empty workitem.item['txtWorkflowSummary']}">
							<h:outputText value="#{workitem.item['$modified']}">
								<f:convertDateTime timeZone="#{message.timeZone}"
									pattern="#{message.dateTimePattern}" />
							</h:outputText>
							<h:outputText value=" #{workitem.item['_subject']}" />
						</h:panelGroup>
						<h:outputText value="#{workitem.item['txtWorkflowSummary']}" />
					</h1>
				</h:panelGroup>

			</h:panelGroup>

			<!-- *** Minute details *** -->
			<h:panelGroup layout="block" class="minute-details">

				<!-- Status -->
				<h:outputText style="font-weight: bold;"
					value="#{workitem.item['txtworkflowgroup']}: " />
				<h:outputText value="#{workitem.item['txtworkflowstatus']}" />


				<!-- Show Body if not edit mode-->
				<div class="imixs-form-section minute-abstract">
					<h:outputText value="#{workitem.item['txtWorkflowAbstract']}"
						escape="false"></h:outputText>

				</div>
				<div class="imixs-form-section-2">
					<dl>
						<dt>
							<h:outputLabel value="#{message['form.minutes.deadline']}:"
								style="font-weight: bold;" />
						</dt>
						<dd>
							<h:outputText value="#{workitem.item['datdate']}">
								<f:convertDateTime pattern="#{message.datePatternShort}"
									timeZone="#{message.timeZone}" />
							</h:outputText>
						</dd>
					</dl>

					<dl>
						<dt>
							<h:outputLabel value="#{message['form.minutes.responsible']}:"
								style="font-weight: bold;" />
						</dt>
						<dd>
							<h:outputText
								value="#{userController.getUserName(workitem.item['namresponsible'])}" />
						</dd>

					</dl>
				</div>
			</h:panelGroup>


			<!-- Tooltip - Details -->
			<h:panelGroup style="display:none;" class="imixs-tooltip">#{workitem.item['txtWorkflowAbstract']}</h:panelGroup>
		</div>
		<!-- clear floating problem from sidebar in ff and chrome.  -->
		<div style="clear: left;" />



	</h:panelGroup>


	<!-- Edit Block -->
	<h:panelGroup id="edit_block"
		rendered="#{(! empty minuteController.workitem) and (minuteController.workitem.item['$uniqueid'] eq workitem.item['$uniqueid'])}">

		<ui:include src="/pages/workitems/forms/minutes/body_entry_edit.xhtml">
			<ui:param name="workitem" value="#{minuteController.workitem}" />
			<ui:param name="minutesBody" value="#{minutesBody}" />
		</ui:include>

	</h:panelGroup>


</ui:composition>

