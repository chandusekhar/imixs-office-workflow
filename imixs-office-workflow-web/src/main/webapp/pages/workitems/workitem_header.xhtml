<f:subview xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets" id="workitem_header_id">


	<h1>
		<h:outputText
			rendered="#{! empty workflowController.workitem.item['txtprocessname']}"
			value="#{workflowController.workitem.item['txtprocessname']}: " />
		<h:outputText
			value="#{workflowController.workitem.item['txtworkflowgroup']}" />
		<!-- Display Deleted status -->
		<h:outputText
			rendered="#{workflowController.workitem.item['type'] eq 'workitemdeleted'}"
			value="- #{message.deleted}!" style="color:red;" />
	</h1>

	<!-- Workitem Info Header -->
	<div>

		<!-- *** Image *** -->
		<h:panelGroup
			rendered="#{!empty workflowController.workitem.item['txtWorkflowImageURL']}"
			style="float:left;margin-right:2px;margin-left:2px;margin-bottom:0px;">
			<h:graphicImage
				url="#{workflowController.workitem.item['txtWorkflowImageURL']}"
				style="max-height: 24px; margin: 4px;"></h:graphicImage>
		</h:panelGroup>


		<!-- *** Standard Info *** -->
		<h:panelGroup>
			<h:outputText style="font-size:14px; font-weight:bold;"
				escape="false"
				rendered="#{empty workflowController.workitem.item['txtWorkflowSummary']}"
				value="#{message.new_workitem}" />

			<h:outputText style="font-size:14px; font-weight:bold;"
				escape="false"
				rendered="#{!empty workflowController.workitem.item['txtWorkflowSummary']}"
				value="#{workflowController.workitem.item['txtWorkflowSummary']}" />
			<br />

			<h:outputText style="font-weight: bold;" value="#{message.status}:" />

			<h:outputText style=""
				value=" #{workflowController.workitem.item['txtworkflowstatus']}" />


			<!-- sub navigation -->

			<div class="imixs-subnav">
				<h:panelGroup rendered="#{! workflowController.newWorkitem}"
					style="cursor:pointer;">
					<a onclick="togglePanel(this,'#history-panel');">#{message.history}</a>
				</h:panelGroup>
				
				<!-- 
				<h:panelGroup rendered="#{! workflowController.newWorkitem}"
					style="cursor:pointer;">
					<a onclick="togglePanel(this,'#reference-panel');">#{message.references}</a>
				</h:panelGroup>
				 -->

				<h:panelGroup style="cursor:pointer;">
					<a onclick="togglePanel(this,'#process-panel');">#{message.progress}</a>
				</h:panelGroup>
			</div>

			<div style="clear: left;" />
			<!-- Workflow History -->
			<div id="history-panel">
				<hr />
				<ui:include src="/pages/workitems/workitem_history.xhtml" />
				<ui:include src="/pages/workitems/workitem_versions.xhtml" />
			</div>
			
			<!-- References -->
			<!--  
			<div id="reference-panel">
				<hr />
				<h1>References...</h1>
			</div>
			-->
			
			<!-- Process Map -->
			<div id="process-panel">
				<hr />
				<ui:include src="/pages/workitems/workitem_processmap.xhtml">
					<ui:param name="workflowgroup"
						value="#{workflowController.workitem.item['txtWorkflowGroup']}" />
					<ui:param name="modelversion"
						value="#{workflowController.workitem.item['$modelVersion']}" />
					<ui:param name="processid"
						value="#{workflowController.workitem.item['$ProcessID']}" />
				</ui:include>
			</div>


		</h:panelGroup>






	</div>



	<script type="text/javascript">
		/*<![CDATA[*/

		

		$(document).ready(function() {


			$('#history-panel').hide();
			$('#process-panel').hide();
			$('#reference-panel').hide();

			
			$('.imixs-subnav a').button({
				icons : {
					secondary : "ui-icon-plus",

				},
				text : true
			});
		});
		
		// change toggle state of a header panel
		function togglePanel(buttonid,panelid) {
			$(panelid).toggle();
			
			if ($(panelid).is(":hidden")) {
			     // do this
				 $(buttonid).button({
						icons : {
							secondary : "ui-icon-plus"
						}
					}).removeClass('active');
			  }  else {
				  $(buttonid).button({
						icons : {
							secondary : "ui-icon-minus"
						}
					}).addClass('active');
				  
			  }
			
		}

		
		
		/*]]>*/
	</script>
</f:subview>
