<f:subview xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<h1>
		<h:outputText
			value="#{workflowController.workitem.item['txtworkflowgroup']}" />
		Â»
		<h:outputText
			value=" #{workflowController.workitem.item['txtworkflowstatus']}" />
		<!-- Display Deleted status -->
		<h:outputText
			rendered="#{workflowController.workitem.item['type'] eq 'workitemdeleted'}"
			value="- #{message.deleted}!" style="color:red;" />
	</h1>

	<!-- Workitem Info Header -->
	<!-- *** Image *** -->
	<h:panelGroup layout="block" styleClass="image-block">
		<ui:include src="/pages/viewentry_icon.xhtml">
			<ui:param name="workitem" value="#{workflowController.workitem}" />
		</ui:include>
	</h:panelGroup>

	<!-- *** Standard Info *** -->
	<div class="content-block">
		<h:outputText styleClass="lead" escape="false"
			rendered="#{empty workflowController.workitem.item['txtWorkflowSummary']}"
			value="#{message.new_workitem}" />

		<h:outputText styleClass="lead" escape="false"
			rendered="#{!empty workflowController.workitem.item['txtWorkflowSummary']}"
			value="#{workflowController.workitem.item['txtWorkflowSummary']}" />
		<br />
		<h:outputLabel value="#{message['process.title']}: " />


		<h:commandLink action="search" immediate="true" actionListener="#{searchController.doReset}">
			<h:outputText
				value="#{workflowController.workitem.item['txtProcessName']}" />
			<f:setPropertyActionListener
				target="#{searchController.searchFilter.item['txtprocessRef']}"
				value="#{workflowController.workitem.item['txtprocessRef']}" />
		</h:commandLink>



	</div>

	<!-- sub navigation -->

	<div class="imixs-subnav">
		<h:panelGroup rendered="#{! workflowController.newWorkitem}"
			style="cursor:pointer;">
			<a onclick="togglePanel(this,'#history-panel');">#{message.history}</a>
		</h:panelGroup>

		<!--  -->
		<h:panelGroup
			rendered="#{! workflowController.newWorkitem and (! empty workitemLinkController.externalReferences or ! empty workitemLinkController.getReferences(''))}"
			style="cursor:pointer;">
			<a onclick="togglePanel(this,'#reference-panel');">#{message.references}</a>
		</h:panelGroup>


		<h:panelGroup style="cursor:pointer;">
			<a onclick="togglePanel(this,'#process-panel');">#{message.progress}</a>
		</h:panelGroup>


		<h:panelGroup style="cursor:pointer;"
			rendered="#{! empty workflowController.versions}">
			<a onclick="togglePanel(this,'#version-panel');">#{message.versions}</a>
		</h:panelGroup>
	</div>




	<div style="clear: left;" />
	<!-- Workflow History -->
	<div id="history-panel" style="display: none;">
		<ui:include src="/pages/workitems/workitem_history.xhtml" />
	</div>


	<!-- References -->

	<div id="reference-panel" style="display: none;">
		<ui:include src="/pages/workitems/workitem_references.xhtml" />
	</div>


	<!-- Process Map -->
	<div id="process-panel" style="display: none;">
		<ui:include src="/pages/workitems/workitem_processmap.xhtml" />
	</div>


	<!-- Workflow Versions -->
	<div id="version-panel" style="display: none;">
		<ui:include src="/pages/workitems/workitem_versions.xhtml" />
	</div>





	<script type="text/javascript">
		/*<![CDATA[*/

		$(document).ready(function() {
			$('.imixs-subnav a').button({
				icons : {
					secondary : "ui-icon-plus"
				},
				text : true
			});
		});

		// change toggle state of a header panel
		function togglePanel(buttonid, panelid) {
			$(panelid).toggle();
			if ($(panelid).is(":hidden")) {
				// do this
				$(buttonid).button({
					icons : {
						secondary : "ui-icon-plus"
					}
				}).removeClass('active');
			} else {
				$(buttonid).button({
					icons : {
						secondary : "ui-icon-minus"
					}
				}).addClass('active');
			}
		}

		/*]]>*/
	</script>
</f:subview>
