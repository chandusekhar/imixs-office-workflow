<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:i="http://java.sun.com/jsf/composite/imixs"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:marty="http://java.sun.com/jsf/composite/marty"
	template="/layout/template.xhtml">

	<ui:define name="content">

		<script type="text/javascript">
			/*<![CDATA[*/

			/*]]>*/
		</script>



		<!-- Documentinfo: $UniqueID= #{reportController.workitem.item['$uniqueid']}-->
		<f:view>


			<h:form id="report_form_id">
				<div class="imixs-form">


					<div class="imixs-header">
						<h1>
							<h:outputText value="#{message['report.title']}: " />
							<h:outputText
								value="#{reportController.workitem.item['txtname']} " />
						</h1>
					</div>




					<!-- ########## Error ########## -->
					<ui:include src="/pages/error_message.xhtml" />


					<div class="imixs-body">
						<f:ajax event="change" render=":report_form_id:hidden_uri">
							<div class="imixs-form-section-2">
								<dl>
									<ui:repeat
										value="#{reportController.params.keySet().toArray()}"
										var="key">
										<dt>
											<h:outputLabel value="#{key}:" />
										</dt>

										<dd>
											<h:inputText value="#{reportController.params[key]}">


											</h:inputText>
										</dd>

									</ui:repeat>


								</dl>

								<dl>
									<dt>Format:</dt>

									<dd>
										<h:selectOneRadio value="#{reportController.format}">
											<f:selectItem itemLabel="HTML" itemValue="html"></f:selectItem>
											<f:selectItem itemLabel="XML" itemValue="xml"></f:selectItem>
											<f:selectItem itemLabel="JSON" itemValue="json"></f:selectItem>
										</h:selectOneRadio>

									</dd>

									<dt>Encoding:</dt>

									<dd>
										<h:inputText value="#{reportController.encoding}"></h:inputText>

									</dd>
								</dl>
							</div>
							<!-- hidden field for uri -->
							<h:inputHidden id="hidden_uri"
								value="#{facesContext.externalContext.requestContextPath}#{reportController.uri}"
								style="width:100%" />
						</f:ajax>

					</div>

					<div class="imixs-footer">

						<!-- open report -->
						<h:commandButton  immediate="true"
							onclick="window.open($('[id$=hidden_uri]').val()).focus();"
							value="#{message.open}">
						</h:commandButton>

						<h:commandButton immediate="true" value="#{message.close}"
							action="reports" />
					</div>







				</div>
			</h:form>
		</f:view>
	</ui:define>



</ui:composition>

