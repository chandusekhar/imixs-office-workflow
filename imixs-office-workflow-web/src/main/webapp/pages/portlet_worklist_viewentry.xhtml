<f:subview xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">


	<div class="imixs-viewentry" title=" ">
		<!-- *** Image *** -->
		<h:panelGroup layout="block" styleClass="image-block">
			<h:commandLink
				action="#{workflowController.load(workitem.item['$uniqueid'],'/pages/workitems/workitem')}">
				<h:graphicImage
					rendered="#{!empty workitem.item['txtWorkflowImageURL']}"
					url="#{workitem.item['txtWorkflowImageURL']}"
					style="max-height: 24px; margin: 4px;"></h:graphicImage>

				<h:graphicImage
					rendered="#{empty workitem.item['txtWorkflowImageURL']}"
					value="/layout/icons/vwicn070.png"
					style="max-height: 24px; margin: 4px;"></h:graphicImage>
			</h:commandLink>

			<!-- favorite marker -->
			<br />
			<h:panelGroup id="marked_id">
				<h:commandLink
					rendered="#{!userController.isFavorite(workitem.item['$uniqueid'])}"
					actionListener="#{userController.addFavorite(workitem.item['$uniqueid'])}">
					<h:graphicImage value="/layout/icons/unmarked.gif"
						style="margin: 0 0 0 7px;"></h:graphicImage>
					<f:ajax render="marked_id" />
				</h:commandLink>
				<h:commandLink
					rendered="#{userController.isFavorite(workitem.item['$uniqueid'])}"
					actionListener="#{userController.removeFavorite(workitem.item['$uniqueid'])}">
					<h:graphicImage value="/layout/icons/marked.gif"
						style="margin: 0 0 0 7px;"></h:graphicImage>
					<f:ajax render="marked_id" />
				</h:commandLink>
			</h:panelGroup>
		</h:panelGroup>


		<!-- *** Standard Info *** -->
		<div class="content-block">
			<h:panelGroup>
				<h:commandLink
					action="#{workflowController.load(workitem.item['$uniqueid'],'/pages/workitems/workitem')}">
					<!-- summary empty ? -->
					<h:panelGroup
						rendered="#{empty workitem.item['txtWorkflowSummary']}">
						<h:outputText value="#{workitem.item['$modified']}"
							style="font-weight: bold;">
							<f:convertDateTime timeZone="#{message.timeZone}"
								pattern="#{message.dateTimePattern}" />
						</h:outputText>
						<h:outputText value=" #{workitem.item['_subject']}"
							style="font-weight: bold;" />
					</h:panelGroup>
					<h:outputText style="font-weight: bold;" escape="false"
						value="#{workitem.item['txtWorkflowSummary']}" />
				</h:commandLink>
			</h:panelGroup>

			<br />
			<!-- Status -->
			<h:outputText style="font-weight: bold;"
				value="#{workitem.item['txtworkflowgroup']}: " />
			<h:outputText value="#{workitem.item['txtworkflowstatus']}" />
			<h:outputText value=" (#{workitem.item['txtProcessName']})" />

			<!-- Modified -->
			<br /> <span> <h:outputText style="font-weight: bold;"
					value="#{message.modified}: " /> <h:outputText
					value="#{workitem.item['$modified']}" style="font-weight: normal;">
					<f:convertDateTime timeZone="#{message.timeZone}"
						pattern="#{message.dateTimePattern}" />
				</h:outputText>
			</span>

			<!-- display owner -->
			<h:panelGroup rendered="#{! empty workitem.item['namowner']}">
				<br />
				<h:outputText style="font-weight: bold;" value="#{message.owner}: " />
				<ui:repeat value="#{workitem.itemList['namowner']}" var="name">
					<h:outputText value="#{userController.getUserName(name)}, " />
				</ui:repeat>
			</h:panelGroup>


		</div>
		<!-- clear floating problem from sidebar in ff and chrome.  -->
		<div style="clear: left;" />

	</div>
	<!-- Tooltip -->
	<h:panelGroup style="display:none;" class="imixs-tooltip">
		<h:outputText value="#{message.created}: " style="font-weight:bold;" />
		<h:outputText value="#{workitem.item['$created']}">
				<f:convertDateTime timeZone="#{message.timeZone}" type="both"
					pattern="#{message.dateTimePattern}" />
		</h:outputText>
		<h:outputText
				value=" #{message.by} #{userController.getUserName(workitem.item['namCreator'])}" />
		<hr />
		<h:outputText value="#{workitem.item['txtWorkflowAbstract']}" escape="false" />
	</h:panelGroup>

</f:subview>

