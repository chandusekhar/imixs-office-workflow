<f:subview xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<!-- ##### Portlet View  ######### 
	
	    Usage: 
	    
	    ... ui:include src="portlet_worklist.xhtml"
					ui:param name="worklist" value="#{viewController}" /
		/ui:include 
	
	-->
	<script type="text/javascript">
		/*<![CDATA[*/

		// This method layouts the filter section with jquery ui design  
		function refreshViewLayout(data) {
			if (data.status === 'success') {
				$(".ui-tooltip").hide();
				// select with wildcard operator
				$("span.imixs-tooltip").layoutImixsTooltip();
			}
		}
		/*]]>*/
	</script>

	<div class="imixs-portlet">
		<div class="imixs-header">

			<div align="right" style="float: right;">
				<h:commandLink actionListener="#{view.doReset}"
					title="#{message.refresh}">
					<h:graphicImage url="/layout/icons/Update2_16.png"></h:graphicImage>
					<f:ajax render="portlet_worklist_body" onevent="refreshViewLayout" />
				</h:commandLink>
			</div>
			
			<!-- single view mode -->
			<h:panelGroup  rendered="#{!tabMode}">
				<ul>
				<li class="active"><h:outputText
						value="#{message[view.view]}" />
						</li>
				</ul>
			</h:panelGroup>

			<!-- switch between owner and creator list if 'tabMode'  -->
			<h:panelGroup id="view-type-navigator" rendered="#{tabMode}">
				<ul>
					<li class="#{view.view eq 'worklist.owner'?'active':'inactive'}">
						<!-- owner --> <h:outputText
							rendered="#{view.view eq 'worklist.owner'}" 
							value="#{message[view.view]}" /> <h:commandLink
							rendered="#{view.view ne 'worklist.owner'}" 
							actionListener="#{view.doReset}">
							<h:outputText value="#{message['worklist.owner']}" />
							<f:setPropertyActionListener target="#{view.view}"
								value="worklist.owner" />
							<f:ajax render="portlet_worklist_body view-type-navigator"
								onevent="refreshViewLayout" />
						</h:commandLink>
					</li>
					<li class="#{view.view eq 'worklist.creator'?'active':'inactive'}">
						<!-- creator --> <h:outputText
							rendered="#{view.view eq 'worklist.creator'}" 
							value="#{message[view.view]}" /> <h:commandLink
							rendered="#{view.view ne 'worklist.creator'}"
							 actionListener="#{view.doReset}">
							<h:outputText value="#{message['worklist.creator']}" />
							<f:setPropertyActionListener target="#{view.view}"
								value="worklist.creator" />
							<f:ajax render="portlet_worklist_body view-type-navigator"
								onevent="refreshViewLayout" />
						</h:commandLink>
					</li>
					<li class="#{view.view eq 'worklist.favorite'?'active':'inactive'}">
						<!-- favorite --> <h:outputText
							rendered="#{view.view eq 'worklist.favorite'}"
							 value="#{message[view.view]}" /> <h:commandLink
							rendered="#{view.view ne 'worklist.favorite'}"
							 actionListener="#{view.doReset}">
							<h:outputText value="#{message['worklist.favorite']}" />
							<f:setPropertyActionListener target="#{view.view}"
								value="worklist.favorite" />
							<f:ajax render="portlet_worklist_body view-type-navigator"
								onevent="refreshViewLayout" />
						</h:commandLink>

					</li>
				</ul>

			</h:panelGroup>
		</div>

		<h:panelGroup id="portlet_worklist_body" layout="block"
			class="imixs-body">

			<!-- **** Workitems ***** -->
			<ui:repeat var="workitem" value="#{view.workitems}">
				<ui:include src="portlet_worklist_viewentry.xhtml">
					<ui:param name="workitem" value="#{workitem}" />
				</ui:include>
			</ui:repeat>

			<h3>
				<h:outputText rendered="#{empty view.workitems}"
					value="#{message.empty_worklist}" />
			</h3>


			<!-- navigation -->
			<h:panelGroup layout="block" id="portlet_worklist_nav"
				class="imixs-footer">
				<span style="margin-right: 10px;"> <h:commandLink
						actionListener="#{view.doLoadPrev}" disabled="#{view.row == 0}"
						value="#{message.prev}">
						<f:ajax render="portlet_worklist_body" onevent="refreshViewLayout" />
					</h:commandLink>
				</span>
				<h:commandLink actionListener="#{view.doLoadNext}"
					disabled="#{view.endOfList}" value="#{message.next}">
					<f:ajax render="portlet_worklist_body" onevent="refreshViewLayout"></f:ajax>
				</h:commandLink>
			</h:panelGroup>

			<div style="clear: right;" />
		</h:panelGroup>


	</div>

</f:subview>

