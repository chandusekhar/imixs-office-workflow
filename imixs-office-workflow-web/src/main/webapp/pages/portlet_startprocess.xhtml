<f:subview xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<div class="imixs-portlet">
		<div class="imixs-header">
			<ul>
				<li class="active"><h:outputText
						value="#{message['process.view']}" /></li>
			</ul>
		</div>
		<!-- *** display all process nodes where the current user is member of *** -->

		<ui:repeat value="#{processController.processList}" var="process">
			<h:panelGroup layout="block" styleClass="imixs-viewentry"
				rendered="#{(loginController.isUserInRole('org.imixs.ACCESSLEVEL.MANAGERACCESS') or process.item['isMember'])}">
				<h1>
					<h:commandLink action="/pages/workitems/worklist" immediate="true"
						actionListener="#{searchController.doReset}">
						<h:outputText value="#{process.item['txtName']}" />
						<span class="typcn typcn-zoom-outline"></span>
						<f:setPropertyActionListener
							target="#{searchController.searchFilter.item['txtprocessRef']}"
							value="#{process.item['$uniqueId']}" />
					</h:commandLink>
				</h1>
				<p><h:outputText value="#{process.item['txtdescription']}" /></p>

				<!-- *** WorkflowGroup List if user is member*** -->
				<h:panelGroup
					rendered="#{!empty process.itemList['txtWorkflowList'] and (loginController.isUserInRole('org.imixs.ACCESSLEVEL.MANAGERACCESS') or process.item['isMember'])}">

					
					<ul style="margin: 5px 0;">


						<ui:repeat value="#{process.itemList['txtWorkflowList']}"
							var="group">

							<!-- verify if workflow groups still exists and if user is member -->
							<h:panelGroup
								rendered="#{! empty modelController.getAllProcessEntitiesByGroup(group)}">





								<ui:param name="processEntity"
									value="#{modelController.getInitialProcessEntityByGroup(group)}" />
								<li><h:commandLink title=" "
										actionListener="#{workflowController.create(processEntity.item['$modelversion'],processEntity.item['numprocessid'],process.item['$uniqueid'])}"
										action="#{workflowController.init('/pages/workitems/workitem')}">

										<h:outputText style="font-weight: bold;" value="#{group} Â»" />
									</h:commandLink> <span class="imixs-tooltip"> <h:outputText
											value="#{processEntity.item['rtfdescription']}"
											escape="false" />
								</span></li>
							</h:panelGroup>

							<h:outputText style="color:red"
								rendered="#{empty modelController.getAllProcessEntitiesByGroup(group)}"
								value="	Missing Model Definition: #{group}"></h:outputText>


						</ui:repeat>
					</ul>
				</h:panelGroup>

			</h:panelGroup>


		</ui:repeat>
	</div>

</f:subview>

