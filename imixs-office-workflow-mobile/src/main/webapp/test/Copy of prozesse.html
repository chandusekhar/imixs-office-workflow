<!DOCTYPE html>
<html>
<head>

	
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet"
		href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
	<script type="text/javascript"
		src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
	<script type="text/javascript"
		src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>

</head>
<body>
	
	<div data-role="page">

		<div data-role="header">
			<h1>Imixs Office Workflow - Projekte</h1>
			<a href="index.html" data-role="button" data-icon="back"
				data-iconpos="right">Back</a>
			<a href="prozesse.html" data-role="button" data-icon="refresh"
				data-iconpos="right">Aktualisieren</a>
		</div>
		<!-- /header -->

		<div data-role="content" >
			<ul id="projects_id" data-role="listview" data-theme="e" data-inset="true" data-filter="false">
			
			</ul>
		
		</div>
		
		<div data-role="footer">
			<h1>Version 0.0.1</h1>
		</div>
	</div>
	<script>
		//alert('start');
		$.getJSON("/office-mobile/rest/report/projektliste.json?", {
			count : "5",
			start : "0"
		}, function(data) {

			$.each(data.entity, function(i, workitem) {
				var workflowSummary = "no title";
				var unid="";
				// find the item with the workflow summary 
				for ( var j = 0; j < workitem.item.length; j++) {
					//alert(j);
					if (workitem.item[j].name == "txtworkflowsummary") 
						workflowSummary = workitem.item[j].value.$;
					
					
					if (workitem.item[j].name == "$uniqueid") 
						unid = workitem.item[j].value.$;
					
					
				}

				// create link 
				var link="worklist.html?id=" + unid;
				// add entry to projectlist
				//$("<li/>").html("" + workflowSummary).appendTo("#projects_id");
				
				$("#projects_id").append("<li><a href=\"" + link + "\">"  + workflowSummary + "</a></li>");
				
				// refresh view
				$("#projects_id").listview("refresh");
				
				
			});
			
		});
	</script>

</body>
</html>